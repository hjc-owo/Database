## 课本p70

1. 关系模型由关系数据结构、关系操作集合、关系完整约束三部分组成。

2. 关系数据语言可以分为三类：关系代数语言、关系演算语言、具有关系代数和关系演算双重特点的语言。

3. (1).

   域：一组具有相同数据类型的集合

   笛卡尔积：给定一组域$D_1,D_2,\cdots,D_n$，允许其中某些域是有相同的。这组域的笛卡尔积为$D_1\times D_2\times \cdots \times D_n=\{(d_1,d_2,\cdots,d_n)|d_i\in D_i,i=1,2,\cdots,n\}$

   关系：在域$D_1,D_2,\cdots,D_n$上笛卡尔积$D_1\times D_2\times \cdots \times D_n$的子集称为关系，表示为$$R(D_1,D_2,\cdots,D_n)$$

   元组：关系中的每个元素是关系中的元组。

   属性：关系也是一个二维表，表的每一行对应一个元组，表的每列对应一个域。由于域可以相同，为了加以区分，必须对每列取个名字，称为属性。

   (2).

   候选码：若关系中的某一属性的值能唯一的标识一个元组，而其子集不能，则称该属性组为候选码。

   主码：若一个关系有多个候选码，则选定其中一个作为主码。

   外码：设$F$是基本关系$R$的一个或一组属性，但不是关系$R$的码，如果$F$的与基本关系$S$的主码$K_S$相对应，则称$F$是基本关系$R$的外码。

   (3).

   关系模式：关系的描述称为关系模式，可以形象化的表示为$R(U,D,DOM,F)$，其中$R$为关系名，$U$为组成该关系的属性名集合，$D$为属性组$U$中属性所来自于的域，$DOM$为属性向域的映像集合，$F$为属性间数据的依赖关系集合。

   关系：见(1)，是关系模式在某一时刻的状态或内容。

   关系数据库：关系数据库也有型和值之分。关系数据库的型称为关系数据库模式，是对关系数据库的描述，它包括若干域的定义以及在这些域上定义的若干关系模式。关系数据库的值是这些关系模式在某一时刻对应的关系的集合，通常称为关系数据库。

4. 关系模式是型；关系是值，是关系模型的实例。

   例如：Stu(ID, Name, Age)是关系模式，下面的表是关系，是某一时刻关系模型的值。

   | ID   | Name | Age  |
   | ---- | ---- | ---- |
   | 001  | AAA  | 18   |
   | 002  | BBB  | 19   |

5. 关系模型的完整性规则有三类：实体完整性、参照完整性、用户定义的完整性。

   实体完整性规则：若属性$A$是基本关系$R$的主属性，则属性$A$不能取空值。

   参照完整性规则：若属性（组）$F$是基本关系$R$的外码，它与基本关系$S$的主码$K_S$相对应（基本关系$R$和$S$不一定是不同的关系），则对于$R$中每个元组在$F$上的值必须为要么是空值（$F$的每个属性均为空值），要么等于$S$中某个元组的主码值。

   用户定义的完整性是针对某一具体关系数据库的约束条件。它反映某一具体应用所涉及的数据必须满足的语义要求。

   在参照完整性中，如果外码属性不是其所在关系的主属性，外码的值可以取空值。

## ER转换关系表作业

1. 每个实体必须有一个关系表。如果两个关系都是多对多，需要多建两个关系表；如果两个关系都是一对一或者一对多，可以合并到实体，不需要再加关系表。综上所述，最多需要5个，最少需要3个。

2. 关系表如下：

   商品 (商品编号 (主键), 名称, 类别, 单位, 单价)

   供应商 (供应商编号 (主键), 名称, 账号, 地址)

   仓库 (仓库编号 (主键), 地址, 负责人)

   ⻔店 (⻔店编号 (主键), 名称, 地址)

   采购员 (采购员编号 (主键), 姓名, 业绩)

   管理员 (管理员编号 (主键), 姓名, 业绩, 仓库编号 (外键 仓库))

   营业员 (营业员编号 (主键), 姓名, 业绩, ⻔店编号 (外键 ⻔店))

   采购 (采购单号 (主键), 数量, 日期, 采购员编号 (外键 采购员), 供应商编号 (外键 供应商), 商品编号 (外键 商品))

   进货 (进货单号 (主键), 数量, 日期, 供应商编号 (外键 供应商), 商品编号 (外键 商品), 仓库编号 (外键 仓库))

   配送 (配送单号 (主键), 数量, 日期, 商品编号 (外键 商品), 仓库编号 (外键 仓库), ⻔店编号 (外键 ⻔店))

   销售 (销售单号 (主键), 数量, 日期, 商品编号 (外键 商品), ⻔店编号 (外键 ⻔店), 营业员编号 (外键 营业员))

   存储 (库存量, 日期 (主键之一), 安全库存量, 商品编号 (主键之一, 外键 商品), 仓库编号 (主键之一, 外键 仓库))

3. ![逻辑模型](https://tva1.sinaimg.cn/large/e6c9d24ely1h13tygnbqbj21fc0okn0a.jpg)